{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}

{{page-title "Accordion Component"}}

<Shw::Text::H1>Accordion</Shw::Text::H1>

<section data-test-percy>
  <Shw::Text::H2>Content</Shw::Text::H2>

  <Shw::Text::H3>Basic</Shw::Text::H3>

  <Shw::Flex {{style gap="1.5rem"}} @direction="column" as |SF|>
    <SF.Item @label="One item">
      <Hds::Accordion as |A|>
        <A.Item>
          <:toggle>Item one</:toggle>
          <:content>
            <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
          </:content>
        </A.Item>
      </Hds::Accordion>
    </SF.Item>

    <SF.Item @label="Multiple items">
      <Hds::Accordion as |A|>
        <A.Item>
          <:toggle>Item one</:toggle>
          <:content>
            <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
          </:content>
        </A.Item>

        <A.Item>
          <:toggle>Another item two</:toggle>
          <:content>
            <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
          </:content>
        </A.Item>

        <A.Item>
          <:toggle>Third item</:toggle>
          <:content>
            <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
          </:content>
        </A.Item>
      </Hds::Accordion>
    </SF.Item>
  </Shw::Flex>

  <Shw::Text::H3>Complex</Shw::Text::H3>

  <Shw::Flex {{style gap="1.5rem"}} @direction="column" as |SF|>
    <SF.Item @label="With nested Accordions">
      <Hds::Accordion as |A|>
        <A.Item @isOpen={{true}}>
          <:toggle>Item one</:toggle>
          <:content>
            <Hds::Accordion>
              <Hds::Accordion::Item>
                <:toggle>Item one nested</:toggle>
                <:content>
                  <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
                </:content>
              </Hds::Accordion::Item>
            </Hds::Accordion>
          </:content>
        </A.Item>

        <A.Item @isOpen={{true}}>
          <:toggle>Another item two</:toggle>
          <:content>
            <Hds::Accordion>
              <Hds::Accordion::Item>
                <:toggle>Item one nested</:toggle>
                <:content>
                  <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
                </:content>
              </Hds::Accordion::Item>
              <Hds::Accordion::Item>
                <:toggle>Item two nested</:toggle>
                <:content>
                  <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
                </:content>
              </Hds::Accordion::Item>
            </Hds::Accordion>
          </:content>
        </A.Item>
      </Hds::Accordion>
    </SF.Item>

    <SF.Item @label="Nested Accordion with isInteractive=false nested in isInteractive=true">
      <Hds::Accordion as |A|>
        <A.Item @isOpen={{true}}>
          <:toggle>Item with isInteractive=true (the default)</:toggle>
          <:content>
            <Hds::Accordion>
              <Hds::Accordion::Item @isInteractive={{false}}>
                <:toggle>Nested item with isInteractive=false</:toggle>
                <:content>
                  <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
                </:content>
              </Hds::Accordion::Item>
            </Hds::Accordion>
          </:content>
        </A.Item>
      </Hds::Accordion>
    </SF.Item>

    <SF.Item @label="Nested Accordion with isInteractive=true nested in isInteractive=false">
      <Hds::Accordion as |A|>
        <A.Item @isOpen={{true}} @isInteractive={{false}}>
          <:toggle>Item with isInteractive=false</:toggle>
          <:content>
            <Hds::Accordion>
              <Hds::Accordion::Item>
                <:toggle>Nested item with isInteractive=true (the default)</:toggle>
                <:content>
                  <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
                </:content>
              </Hds::Accordion::Item>
            </Hds::Accordion>
          </:content>
        </A.Item>
      </Hds::Accordion>
    </SF.Item>

    <SF.Item @label="With rich content in toggle (HTML header tag)">
      <Hds::Accordion as |A|>
        <A.Item>
          <:toggle>
            <h4 class="hds-typography-display-300">Header tag example</h4>
          </:toggle>
          <:content>
            <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
          </:content>
        </A.Item>
      </Hds::Accordion>
    </SF.Item>

    <SF.Item @label="With interactive content in toggle and in toggled content">
      <Hds::Accordion as |A|>
        <A.Item @isInteractive={{false}}>
          <:toggle>
            Related text
            <a href="https://www.hashicorp.com/">A link</a>
            <Hds::Button @text="HDS Button" @size="small" />
          </:toggle>
          <:content>
            Text content with a link:
            <a href="https://www.hashicorp.com/">A link</a>
            and an HDS button:
            <Hds::Button @text="HDS Button" />
          </:content>
        </A.Item>
      </Hds::Accordion>
    </SF.Item>

    <SF.Item @label="With rich content in toggle (Alert) and containing a table">
      <Hds::Accordion as |A|>
        <A.Item @isOpen={{true}}>
          <:toggle>
            <Hds::Alert @type="compact" @color="success" as |A|>
              <A.Title>Title</A.Title>
              <A.Description>Plan finished <small>22 days ago</small></A.Description>
            </Hds::Alert>
          </:toggle>
          <:content>
            <p class="hds-typography-body-200">
              <strong>Queued:</strong>
              9 days ago >
              <strong>Finished:</strong>
              9 days ago
            </p>
            <Hds::Table @caption="Example table">
              <:head as |H|>
                <H.Tr>
                  <H.Th>Name</H.Th>
                  <H.Th>Type</H.Th>
                  <H.Th>Value</H.Th>
                </H.Tr>
              </:head>
              <:body as |B|>
                <B.Tr>
                  <B.Td>Cell one A</B.Td>
                  <B.Td>Cell two A</B.Td>
                  <B.Td>Cell three A</B.Td>
                </B.Tr>
                <B.Tr>
                  <B.Td>Cell one B</B.Td>
                  <B.Td>Cell two B</B.Td>
                  <B.Td>Cell three B</B.Td>
                </B.Tr>
              </:body>
            </Hds::Table>
          </:content>
        </A.Item>
      </Hds::Accordion>
    </SF.Item>
  </Shw::Flex>

  <Shw::Text::H3>Edge cases</Shw::Text::H3>

  <Shw::Flex {{style gap="1.5rem"}} @direction="column" as |SF|>
    <SF.Item @label="With long content in toggle which wraps">
      <Hds::Accordion as |A|>
        <A.Item>
          <:toggle>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Libero culpa expedita assumenda at nisi minus unde
            fuga iure suscipit aut qui, odit natus eum voluptates ut molestiae! Perferendis, impedit qui? Lorem ipsum
            dolor sit amet consectetur adipisicing elit. Libero culpa expedita assumenda at nisi minus unde fuga iure
            suscipit aut qui, odit natus eum voluptates ut molestiae! Perferendis, impedit qui?
          </:toggle>
          <:content>
            <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
          </:content>
        </A.Item>
      </Hds::Accordion>
    </SF.Item>
  </Shw::Flex>

  <Shw::Divider @level={{2}} />

  <Shw::Text::H2>States</Shw::Text::H2>

  <Shw::Flex {{style gap="2rem"}} as |SF|>
    <SF.Item {{style gap="1.5rem" width="calc(50% - 1rem)"}} @label="AccordionItem @isInteractive=true">
      <Shw::Flex {{style gap="1.5rem"}} @direction="column" as |SF|>
        {{#each @model.STATES as |state|}}
          <SF.Item @label={{state}}>
            <Hds::Accordion as |A|>
              <A.Item
                mock-state-value={{state}}
                mock-state-selector="{{if (not-eq state 'hover') '.hds-accordion-item__button'}}"
              >
                <:toggle>Item one</:toggle>
                <:content>
                  <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
                </:content>
              </A.Item>
            </Hds::Accordion>
          </SF.Item>
        {{/each}}

        <SF.Item @label="focus & isOpen=true">
          <Hds::Accordion as |A|>
            <A.Item mock-state-value="focus" mock-state-selector=".hds-accordion-item__button" @isOpen={{true}}>
              <:toggle>Item one</:toggle>
              <:content>
                <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
              </:content>
            </A.Item>
          </Hds::Accordion>
        </SF.Item>
      </Shw::Flex>
    </SF.Item>

    <SF.Item {{style gap="1.5rem" width="calc(50% - 1rem)"}} @label="AccordionItem @isInteractive=false">
      <Shw::Flex {{style gap="1.5rem"}} @direction="column" as |SF|>
        {{#each @model.STATES as |state|}}
          <SF.Item @label={{state}}>
            <Hds::Accordion as |A|>
              <A.Item
                @isInteractive={{false}}
                mock-state-value={{state}}
                mock-state-selector=".hds-accordion-item__button"
              >
                <:toggle>Item one <a href="https://www.hashicorp.com/">HashiCorp</a></:toggle>
                <:content>
                  <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
                </:content>
              </A.Item>
            </Hds::Accordion>
          </SF.Item>
        {{/each}}
        <SF.Item @label="focus & isOpen=true">
          <Hds::Accordion as |A|>
            <A.Item
              @isInteractive={{false}}
              mock-state-value="focus"
              @isOpen={{true}}
              mock-state-selector=".hds-accordion-item__button"
            >
              <:toggle>Item one <a href="https://www.hashicorp.com/">HashiCorp</a></:toggle>
              <:content>
                <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
              </:content>
            </A.Item>
          </Hds::Accordion>
        </SF.Item>
      </Shw::Flex>
    </SF.Item>
  </Shw::Flex>

  <Shw::Divider @level={{2}} />

  <Shw::Text::H2>Base elements</Shw::Text::H2>

  <Shw::Text::H3>Accordion</Shw::Text::H3>

  <Hds::Accordion class="shw-empty-accordion-example" />

  <Shw::Text::H3>Accordion::Item</Shw::Text::H3>

  <Shw::Flex {{style gap="2rem"}} as |SF|>
    {{#each @model.STATES as |state|}}
      <SF.Item @label={{state}} {{style flex="1"}}>
        <Hds::Accordion::Item
          mock-state-value={{state}}
          mock-state-selector="{{if (not-eq state 'hover') '.hds-accordion-item__button'}}"
        >
          <:toggle>Item one</:toggle>
          <:content>
            <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
          </:content>
        </Hds::Accordion::Item>
      </SF.Item>
    {{/each}}

    <SF.Item @label="focus & isOpen=true" {{style flex="1"}}>
      <Hds::Accordion::Item mock-state-value="focus" mock-state-selector=".hds-accordion-item__button" @isOpen={{true}}>
        <:toggle>Item one</:toggle>
        <:content>
          <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
        </:content>
      </Hds::Accordion::Item>
    </SF.Item>
  </Shw::Flex>

  <Shw::Text::H3>Accordion::Item::Button</Shw::Text::H3>

  <Shw::Flex {{style gap="2rem"}} @label="isInteractive=true" as |SF|>
    {{#each @model.STATES as |state|}}
      <SF.Item @label={{state}} {{style flex="1"}}>
        <Hds::Accordion::Item::Button @isInteractive={{true}} mock-state-value={{state}} />
      </SF.Item>
    {{/each}}

    <SF.Item @label="focus & isOpen=true" {{style flex="1"}}>
      <Hds::Accordion::Item::Button @isInteractive={{true}} @isOpen={{true}} mock-state-value="focus" />
    </SF.Item>
  </Shw::Flex>

  <Shw::Flex {{style gap="2rem"}} @label="isInteractive=false" as |SF|>
    {{#each @model.STATES as |state|}}
      <SF.Item @label={{state}} {{style flex="1"}}>
        <Hds::Accordion::Item::Button @isInteractive={{false}} mock-state-value={{state}} />
      </SF.Item>
    {{/each}}

    <SF.Item @label="focus & isOpen=true" {{style flex="1"}}>
      <Hds::Accordion::Item::Button @isInteractive={{false}} @isOpen={{true}} mock-state-value="focus" />
    </SF.Item>
  </Shw::Flex>

  <Shw::Divider @level={{2}} />

  <Shw::Text::H2>Options</Shw::Text::H2>

  <Shw::Text::H3>isOpen</Shw::Text::H3>

  <Shw::Flex {{style gap="1.5rem"}} @direction="column" as |SF|>
    <SF.Item @label="Default, isOpen=false">
      <Hds::Accordion as |A|>
        <A.Item>
          <:toggle>Item one</:toggle>
          <:content>
            <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
          </:content>
        </A.Item>
      </Hds::Accordion>
    </SF.Item>

    <SF.Item @label="isOpen=true">
      <Hds::Accordion as |A|>
        <A.Item @isOpen={{true}}>
          <:toggle>Item one</:toggle>
          <:content>
            <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
          </:content>
        </A.Item>
      </Hds::Accordion>
    </SF.Item>
  </Shw::Flex>

  <Shw::Text::H3>isInteractive</Shw::Text::H3>

  <Shw::Flex {{style gap="1.5rem"}} @direction="column" as |SF|>
    <SF.Item @label="Default, isInteractive=true">
      <Hds::Accordion as |A|>
        <A.Item>
          <:toggle>Item one</:toggle>
          <:content>
            <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
          </:content>
        </A.Item>
      </Hds::Accordion>
    </SF.Item>

    <SF.Item @label="isInteractive=false (See “States”)">
      <Hds::Accordion as |A|>
        <A.Item @isInteractive={{false}}>
          <:toggle>Item one</:toggle>
          <:content>
            <Shw::Placeholder @text="generic content" @height="40" @background="#eee" />
          </:content>
        </A.Item>
      </Hds::Accordion>
    </SF.Item>
  </Shw::Flex>
</section>