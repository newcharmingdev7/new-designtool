{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}

{{page-title "Pagination Component"}}

<h2 class="dummy-h2">Pagination</h2>

<section data-test-percy class="{{if this.showHighlight 'dummy-pagination-layout-highlight'}}">
  <button id="dummy-toggle-highlight" type="button" {{on "click" this.toggleHighlight}}>
    {{if this.showHighlight "Hide" "Show"}}
    layout highlight
  </button>

  <h4 class="dummy-h4">Pagination::Numbered</h4>

  <p class="dummy-text-small">Base (default)</p>
  <Hds::Pagination::Numbered @totalItems={{40}} />

  <p class="dummy-text-small">With showTotalItems=false</p>
  <Hds::Pagination::Numbered @totalItems={{40}} @showTotalItems={{false}} />

  <p class="dummy-text-small">With showSizeSelector=false</p>
  <Hds::Pagination::Numbered @totalItems={{40}} @showSizeSelector={{false}} />

  <p class="dummy-text-small">With showInfo=false</p>
  <Hds::Pagination::Numbered @totalItems={{40}} @showInfo={{false}} />

  <p class="dummy-text-small">With showInfo=false + showSizeSelector=false</p>
  <Hds::Pagination::Numbered @totalItems={{40}} @showInfo={{false}} @showSizeSelector={{false}} />

  <p class="dummy-text-small">With @currentPageSize=30 and @currentPage=2</p>
  <Hds::Pagination::Numbered
    @totalItems={{40}}
    @currentPageSize={{30}}
    @currentPage={{2}}
    @pageSizes={{array 10 30 50}}
  />

  <p class="dummy-text-small">With @showPageNumbers=false + @showLabels=true</p>
  <Hds::Pagination::Numbered @totalItems={{40}} @showPageNumbers={{false}} @showLabels={{true}} />

  <h5 class="dummy-h6">Truncation</h5>
  <p class="dummy-text-small">With large number of pages (truncated by default)</p>
  <Hds::Pagination::Numbered @totalItems={{100}} />
  <p class="dummy-text-small">With large number of pages (truncated with initial page equal to <code>4</code>)</p>
  <Hds::Pagination::Numbered @totalItems={{100}} @currentPage={{4}} />
  <p class="dummy-text-small">With large number of pages (not truncated)</p>
  <Hds::Pagination::Numbered @totalItems={{100}} @isTruncated={{false}} />

  <hr class="dummy-divider" />

  <h4 class="dummy-h4">Pagination::Compact</h4>

  <p class="dummy-text-small">Base (default)</p>
  <Hds::Pagination::Compact />

  <p class="dummy-text-small">With "prev" disabled</p>
  <Hds::Pagination::Compact @isDisabledPrev={{true}} />

  <p class="dummy-text-small">With @showLabels=false</p>
  <Hds::Pagination::Compact @showLabels={{false}} />

  <hr class="dummy-divider" />

  <h4 class="dummy-h4">Base elements</h4>

  <h5 class="dummy-h5">Pagination::Info</h5>
  <p class="dummy-text-small">Base (default)</p>
  <Hds::Pagination::Info @itemsRangeStart={{1}} @itemsRangeEnd={{10}} @totalItems={{103}} />

  <p class="dummy-text-small">With @showTotalItems=false</p>
  <Hds::Pagination::Info @itemsRangeStart={{1}} @itemsRangeEnd={{10}} @totalItems={{103}} @showTotalItems={{false}} />

  <h5 class="dummy-h5">Pagination::SizeSelector</h5>
  <p class="dummy-text-small">Base (default)</p>
  <Hds::Pagination::SizeSelector @pageSizes={{array 10 30 50}} />

  <p class="dummy-text-small">With @currentPageSize (selected option)</p>
  <Hds::Pagination::SizeSelector @pageSizes={{array 10 30 50}} @selectedSize={{30}} />

  <p class="dummy-text-small">With @label to add custom label text</p>
  <Hds::Pagination::SizeSelector @pageSizes={{array 10 30 50}} @label="Items" />

  <h5 class="dummy-h5">Pagination::Nav::Arrow</h5>
  <div class="dummy-pagination-base-sample">
    <div>
      <p class="dummy-text-small">With text label (default)</p>
      <div class="dummy-pagination-base-sample-row">
        <Hds::Pagination::Nav::Arrow @direction="prev" />
        <Hds::Pagination::Nav::Arrow @direction="next" />
      </div>
    </div>
    <div>
      <p class="dummy-text-small">With @showLabel=false</p>
      <div class="dummy-pagination-base-sample-row">
        <Hds::Pagination::Nav::Arrow @direction="prev" @showLabel={{false}} />
        <Hds::Pagination::Nav::Arrow @direction="next" @showLabel={{false}} />
      </div>
    </div>
  </div>
  <p class="dummy-text-small">States (With / Without labels)</p>
  <div class="dummy-pagination-sample-status-grid">
    {{#let (array "default" "hover" "active" "focus") as |states|}}
      {{#each states as |state|}}
        <span class="dummy-text-small">{{capitalize state}}</span>
        <div class="dummy-pagination-base-sample-row" mock-state-value={{state}} mock-state-selector="button,a">
          <Hds::Pagination::Nav::Arrow @direction="prev" />
          <Hds::Pagination::Nav::Arrow @direction="next" />
        </div>
        <div class="dummy-pagination-base-sample-row" mock-state-value={{state}} mock-state-selector="button,a">
          <Hds::Pagination::Nav::Arrow @direction="prev" @showLabel={{false}} />
          <Hds::Pagination::Nav::Arrow @direction="next" @showLabel={{false}} />
        </div>
      {{/each}}
      <span class="dummy-text-small">Disabled</span>
      <div class="dummy-pagination-base-sample-row">
        <Hds::Pagination::Nav::Arrow @direction="prev" @disabled={{true}} />
        <Hds::Pagination::Nav::Arrow @direction="next" @disabled={{true}} />
      </div>
      <div class="dummy-pagination-base-sample-row">
        <Hds::Pagination::Nav::Arrow @direction="prev" @showLabel={{false}} @disabled={{true}} />
        <Hds::Pagination::Nav::Arrow @direction="next" @showLabel={{false}} @disabled={{true}} />
      </div>
    {{/let}}
  </div>

  <h5 class="dummy-h5">Pagination::Nav::Number</h5>
  <div class="dummy-pagination-base-sample dummy-pagination-base-sample--nav-button-number">
    <div>
      <p class="dummy-text-small">Generic (default)</p>
      <ul class="dummy-pagination-sample-fake-list"><Hds::Pagination::Nav::Number @page="1" /></ul>
    </div>
    <div>
      <p class="dummy-text-small">Current (with @isSelected=true)</p>
      <ul class="dummy-pagination-sample-fake-list"><Hds::Pagination::Nav::Number @page="1" @isSelected={{true}} /></ul>
    </div>
  </div>
  <p class="dummy-text-small">States (Generic / Current - With different text lengths)</p>
  <div class="dummy-pagination-sample-status-grid">
    {{#let (array "default" "hover" "active" "focus") as |states|}}
      {{#each states as |state|}}
        <span class="dummy-text-small">{{capitalize state}}</span>
        <div class="dummy-pagination-base-sample-row" mock-state-value={{state}} mock-state-selector="button,a">
          <ul class="dummy-pagination-sample-fake-list"><Hds::Pagination::Nav::Number @page="1" /></ul>
          <ul class="dummy-pagination-sample-fake-list"><Hds::Pagination::Nav::Number @page="12" /></ul>
          <ul class="dummy-pagination-sample-fake-list"><Hds::Pagination::Nav::Number @page="123" /></ul>
        </div>
        <div class="dummy-pagination-base-sample-row" mock-state-value={{state}} mock-state-selector="button,a">
          <ul class="dummy-pagination-sample-fake-list"><Hds::Pagination::Nav::Number
              @page="1"
              @isSelected={{true}}
            /></ul>
          <ul class="dummy-pagination-sample-fake-list"><Hds::Pagination::Nav::Number
              @page="12"
              @isSelected={{true}}
            /></ul>
          <ul class="dummy-pagination-sample-fake-list"><Hds::Pagination::Nav::Number
              @page="123"
              @isSelected={{true}}
            /></ul>
        </div>
      {{/each}}
    {{/let}}
  </div>

  <h5 class="dummy-h5">Pagination::Nav::Ellipsis</h5>
  <p class="dummy-text-small">Base</p>
  <Hds::Pagination::Nav::Ellipsis />

  <hr class="dummy-divider" />

  <h4 class="dummy-h4">Examples of paginated tables</h4>

  {{! ============================================ }}
  {{! ===== DEMO #1 - NUMBERED - WITH EVENTS ===== }}
  {{! ============================================ }}

  <h5 class="dummy-h5">Numbered - Events-based pagination</h5>
  <p class="dummy-paragraph">When using an "events-based" strategy, the status of the UI is transient, and it's not
    preserved across page reloads.</p>

  <div class="dummy-pagination-table-demo" id="demo1-numbered-with-events">
    <Hds::Table
      @model={{this.paginatedData_demo1}}
      @columns={{array
        (hash key="id" label="ID")
        (hash key="name" label="Name")
        (hash key="email" label="Email")
        (hash key="role" label="Role")
      }}
      @density={{if (eq this.currentPageSize_demo1 30) "short" "medium"}}
    >
      <:body as |B|>
        <B.Tr>
          <B.Td>{{B.data.id}}</B.Td>
          <B.Td>{{B.data.name}}</B.Td>
          <B.Td>{{B.data.email}}</B.Td>
          <B.Td>{{B.data.role}}</B.Td>
        </B.Tr>
      </:body>
    </Hds::Table>
    <Hds::Pagination::Numbered
      @totalItems={{this.demoTotalItems}}
      @currentPageSize={{this.currentPageSize_demo1}}
      @pageSizes={{array 5 10 30}}
      @onPageChange={{this.onPageChange_demo1}}
      @onPageSizeChange={{this.onPageSizeChange_demo1}}
    />
  </div>

  {{! ============================================= }}
  {{! ===== DEMO #2 - NUMBERED - WITH ROUTING ===== }}
  {{! ============================================= }}

  <h5 class="dummy-h5">Numbered - Routing-based pagination</h5>
  <p class="dummy-paragraph">When using a "routing-based" strategy, the status of the UI is preserved across page
    reloads using the query parameters stored in the URL.</p>
  <div class="dummy-pagination-table-demo" id="demo2-numbered-with-routing">
    <Hds::Table
      @model={{this.paginatedData_demo2}}
      @columns={{array
        (hash key="id" label="ID" isSortable="true")
        (hash key="name" label="Name" isSortable="true")
        (hash key="email" label="Email")
        (hash key="role" label="Role")
      }}
      @sortBy={{this.currentSortBy_demo2}}
      @sortOrder={{this.currentSortOrder_demo2}}
      @onSort={{this.onTableSort_demo2}}
      @density={{if (eq this.currentPageSize_demo2 30) "short" "medium"}}
    >
      <:body as |B|>
        <B.Tr>
          <B.Td>{{B.data.id}}</B.Td>
          <B.Td>{{B.data.name}}</B.Td>
          <B.Td>{{B.data.email}}</B.Td>
          <B.Td>{{B.data.role}}</B.Td>
        </B.Tr>
      </:body>
    </Hds::Table>
    <Hds::Pagination::Numbered
      @totalItems={{this.demoTotalItems}}
      @currentPageSize={{this.currentPageSize_demo2}}
      @pageSizes={{array 5 10 30}}
      @currentPage={{this.currentPage_demo2}}
      @route={{this.demoRouteName}}
      @queryFunction={{this.consumerQueryFunction_demo2}}
      @onPageChange={{this.genericHandlePageChange}}
      @onPageSizeChange={{this.genericHandlePageSizeChange}}
    />
  </div>

  {{! =========================================== }}
  {{! ===== DEMO #3 - COMPACT - WITH EVENTS ===== }}
  {{! =========================================== }}

  <h5 class="dummy-h5">Compact - Events-based pagination</h5>
  <p class="dummy-paragraph">When using an "events-based" strategy, the status of the UI is transient, and it's not
    preserved across page reloads.</p>

  <div class="dummy-pagination-table-demo" id="demo3-compact-with-events">
    <Hds::Table
      @model={{this.paginatedData_demo3}}
      @columns={{array
        (hash key="id" label="ID")
        (hash key="name" label="Name")
        (hash key="email" label="Email")
        (hash key="role" label="Role")
      }}
    >
      <:body as |B|>
        <B.Tr>
          <B.Td>{{B.data.id}}</B.Td>
          <B.Td>{{B.data.name}}</B.Td>
          <B.Td>{{B.data.email}}</B.Td>
          <B.Td>{{B.data.role}}</B.Td>
        </B.Tr>
      </:body>
    </Hds::Table>
    <Hds::Pagination::Compact
      @isDisabledPrev={{this.isDisabledPrev_demo3}}
      @isDisabledNext={{this.isDisabledNext_demo3}}
      @onPageChange={{this.onPageChange_demo3}}
    />
  </div>

  {{! ============================================ }}
  {{! ===== DEMO #4 - COMPACT - WITH ROUTING ===== }}
  {{! ============================================ }}

  {{! Notice: this demo emulates the current implementation in Cloud UI }}

  <h5 class="dummy-h5">Compact - Routing-based pagination</h5>
  <p class="dummy-paragraph">When using a "routing-based" strategy, the status of the UI is preserved across page
    reloads using the query parameters stored in the URL.</p>

  <div class="dummy-pagination-table-demo" id="demo4-compact-with-routing">
    <Hds::Table
      @model={{this.paginatedData_demo4}}
      @columns={{array
        (hash key="id" label="ID")
        (hash key="name" label="Name")
        (hash key="email" label="Email")
        (hash key="role" label="Role")
      }}
    >
      <:body as |B|>
        <B.Tr>
          <B.Td>{{B.data.id}}</B.Td>
          <B.Td>{{B.data.name}}</B.Td>
          <B.Td>{{B.data.email}}</B.Td>
          <B.Td>{{B.data.role}}</B.Td>
        </B.Tr>
      </:body>
    </Hds::Table>
    <Hds::Pagination::Compact
      @route={{this.demoRouteName}}
      @queryFunction={{this.consumerQueryFunction_demo4}}
      @isDisabledPrev={{this.isDisabledPrev_demo4}}
      @isDisabledNext={{this.isDisabledNext_demo4}}
      @onPageChange={{this.genericHandlePageChange}}
    />
  </div>

</section>