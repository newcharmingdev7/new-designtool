{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}

{{page-title "Table Component"}}

<Shw::Text::H1>Table</Shw::Text::H1>

<section data-test-percy>

  <Shw::Text::H2>Density</Shw::Text::H2>

  <Shw::Flex @label="Default" as |SF|>
    <SF.Item @grow={{true}}>
      <Hds::Table>
        <:head as |H|>
          <H.Tr>
            <H.Th>Lorem</H.Th>
            <H.Th>Ipsum</H.Th>
            <H.Th>Dolor</H.Th>
            <H.Th>Sit amet</H.Th>
          </H.Tr>
        </:head>
        <:body as |B|>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
        </:body>
      </Hds::Table>
    </SF.Item>
  </Shw::Flex>
  <Shw::Flex @label="Short" as |SF|>
    <SF.Item @grow={{true}}>
      <Hds::Table @density="short">
        <:head as |H|>
          <H.Tr>
            <H.Th>Lorem</H.Th>
            <H.Th>Ipsum</H.Th>
            <H.Th>Dolor</H.Th>
            <H.Th>Sit amet</H.Th>
          </H.Tr>
        </:head>
        <:body as |B|>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
        </:body>
      </Hds::Table>
    </SF.Item>
  </Shw::Flex>
  <Shw::Flex @label="Tall" as |SF|>
    <SF.Item @grow={{true}}>
      <Hds::Table @density="tall">
        <:head as |H|>
          <H.Tr>
            <H.Th>Lorem</H.Th>
            <H.Th>Ipsum</H.Th>
            <H.Th>Dolor</H.Th>
            <H.Th>Sit amet</H.Th>
          </H.Tr>
        </:head>
        <:body as |B|>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
        </:body>
      </Hds::Table>
    </SF.Item>
  </Shw::Flex>

  <Shw::Divider @level={{2}} />

  <Shw::Text::H2>Data model</Shw::Text::H2>

  <Shw::Flex @label="Table with model" as |SF|>
    <SF.Item @grow={{true}}>
      <Hds::Table
        @model={{this.model.music}}
        @columns={{array
          (hash key="artist" label="Artist")
          (hash key="album" label="Album")
          (hash key="year" label="Release Year")
        }}
      >
        <:body as |B|>
          <B.Tr>
            <B.Td>{{B.data.artist}}</B.Td>
            <B.Td>{{B.data.album}}</B.Td>
            <B.Td>{{B.data.year}}</B.Td>
          </B.Tr>
        </:body>
      </Hds::Table>
    </SF.Item>
  </Shw::Flex>
  <Shw::Flex @label="Table with no model defined" as |SF|>
    <SF.Item @grow={{true}}>
      <Hds::Table @caption="a custom table with no model defined">
        <:head as |H|>
          <H.Tr>
            <H.Th>Cell Header</H.Th>
            <H.Th>Cell Header</H.Th>
            <H.Th @width="20%">Custom Width</H.Th>
          </H.Tr>
        </:head>
        <:body as |B|>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
        </:body>
      </Hds::Table>
    </SF.Item>
  </Shw::Flex>

  <Shw::Divider @level={{2}} />

  <Shw::Text::H2>Sorting</Shw::Text::H2>

  <Shw::Text::H3>Basic sorting</Shw::Text::H3>

  <Shw::Text::Body>Sortable table (all columns sortable)</Shw::Text::Body>

  <Hds::Table
    @model={{this.model.music}}
    @columns={{array
      (hash key="artist" label="Artist" isSortable="true")
      (hash key="album" label="Album" isSortable="true")
      (hash key="year" label="Release Year" isSortable="true")
    }}
  >
    <:body as |B|>
      <B.Tr>
        <B.Td>{{B.data.artist}}</B.Td>
        <B.Td>{{B.data.album}}</B.Td>
        <B.Td>{{B.data.year}}</B.Td>
      </B.Tr>
    </:body>
  </Hds::Table>

  <Shw::Text::Body>Sortable table (only some columns sortable)</Shw::Text::Body>

  <Hds::Table
    @model={{this.model.music}}
    @columns={{array
      (hash key="artist" label="Artist" isSortable="true")
      (hash key="album" label="Album" isSortable="true")
      (hash key="year" label="Release Year")
    }}
  >
    <:body as |B|>
      <B.Tr>
        <B.Td>{{B.data.artist}}</B.Td>
        <B.Td>{{B.data.album}}</B.Td>
        <B.Td>{{B.data.year}}</B.Td>
      </B.Tr>
    </:body>
  </Hds::Table>

  <Shw::Text::Body>Sortable table, some columns sortable, artist column pre-sorted.</Shw::Text::Body>

  <Hds::Table
    @model={{this.model.music}}
    @columns={{array
      (hash key="artist" label="Artist" isSortable="true")
      (hash key="album" label="Album" isSortable="true")
      (hash key="year" label="Release Year")
    }}
    @sortBy="artist"
  >
    <:body as |B|>
      <B.Tr>
        <B.Td>{{B.data.artist}}</B.Td>
        <B.Td>{{B.data.album}}</B.Td>
        <B.Td>{{B.data.year}}</B.Td>
      </B.Tr>
    </:body>
  </Hds::Table>

  <Shw::Text::H3>Custom sorting</Shw::Text::H3>

  <Shw::Text::Body>Sortable table with custom sorting done via extra key added to the data model</Shw::Text::Body>

  <Hds::Table
    @model={{this.clustersWithExtraData}}
    @columns={{array
      (hash label="Peer name" isSortable="true" key="peer-name")
      (hash label="Cluster partition")
      (hash label="Status" isSortable="true" key="status-sort-order")
      (hash label="Imported services")
      (hash label="Exported services")
      (hash label="Actions")
    }}
    @sortBy="status-sort-order"
    @sortOrder="asc"
  >
    <:body as |B|>
      <B.Tr>
        <B.Td>{{B.data.peer-name}}</B.Td>
        <B.Td>{{B.data.cluster-partition}}</B.Td>
        <B.Td>
          {{#if (eq B.data.status "failing")}}
            <Hds::Badge @text="Failing" @color="critical" @icon="x" />
          {{else if (eq B.data.status "active")}}
            <Hds::Badge @text="Active" @color="success" @icon="check" />
          {{else if (eq B.data.status "pending")}}
            <Hds::Badge @text="Pending" @color="neutral" @icon="loading" />
          {{else if (eq B.data.status "establishing")}}
            <Hds::Badge @text="Establishing" @color="highlight" @icon="loading" />
          {{/if}}
        </B.Td>
        <B.Td>{{B.data.services.imported}}</B.Td>
        <B.Td>{{B.data.services.exported}}</B.Td>
        <B.Td @align="right">
          <Hds::Dropdown as |dd|>
            <dd.ToggleIcon @icon="more-horizontal" @text="Overflow Options" @hasChevron={{false}} @size="small" />
            <dd.Interactive @route="components.table" @text="Create" />
            <dd.Interactive @route="components.table" @text="Read" />
            <dd.Interactive @route="components.table" @text="Update" />
            <dd.Separator />
            <dd.Interactive @route="components.table" @text="Delete" @color="critical" @icon="trash" />
          </Hds::Dropdown>
        </B.Td>
      </B.Tr>
    </:body>
  </Hds::Table>

  <Shw::Text::Body>Sortable table with custom `sortingFunction` declared in the column hash</Shw::Text::Body>

  <Hds::Table
    @model={{this.model.clusters}}
    @columns={{array
      (hash label="Peer name" isSortable="true" key="peer-name")
      (hash label="Cluster partition")
      (hash label="Status" isSortable="true" key="status" sortingFunction=this.customSortingMethodForClusterStatus)
      (hash label="Imported services")
      (hash label="Exported services")
      (hash label="Actions")
    }}
    @sortBy="status"
    @sortOrder="asc"
    @onSort={{this.customOnSort}}
  >
    <:body as |B|>
      <B.Tr>
        <B.Td>{{B.data.peer-name}}</B.Td>
        <B.Td>{{B.data.cluster-partition}}</B.Td>
        <B.Td>
          {{#if (eq B.data.status "failing")}}
            <Hds::Badge @text="Failing" @color="critical" @icon="x" />
          {{else if (eq B.data.status "active")}}
            <Hds::Badge @text="Active" @color="success" @icon="check" />
          {{else if (eq B.data.status "pending")}}
            <Hds::Badge @text="Pending" @color="neutral" @icon="loading" />
          {{else if (eq B.data.status "establishing")}}
            <Hds::Badge @text="Establishing" @color="highlight" @icon="loading" />
          {{/if}}
        </B.Td>
        <B.Td>{{B.data.services.imported}}</B.Td>
        <B.Td>{{B.data.services.exported}}</B.Td>
        <B.Td @align="right">
          <Hds::Dropdown as |dd|>
            <dd.ToggleIcon @icon="more-horizontal" @text="Overflow Options" @hasChevron={{false}} @size="small" />
            <dd.Interactive @route="components.table" @text="Create" />
            <dd.Interactive @route="components.table" @text="Read" />
            <dd.Interactive @route="components.table" @text="Update" />
            <dd.Separator />
            <dd.Interactive @route="components.table" @text="Delete" @color="critical" @icon="trash" />
          </Hds::Dropdown>
        </B.Td>
      </B.Tr>
    </:body>
  </Hds::Table>

  <Shw::Divider />

  <Shw::Text::H2>Customization</Shw::Text::H2>

  <Shw::Text::Body>Sortable table, last column not sortable and has custom width.</Shw::Text::Body>

  <Hds::Table
    @model={{this.model.music}}
    @columns={{array
      (hash key="artist" label="Artist" isSortable="true")
      (hash key="album" label="Album" isSortable="true")
      (hash key="year" label="Release Year" isSortable="true")
      (hash key="other" label="Other" width="55px")
    }}
    @valign="middle"
  >
    <:body as |B|>
      <B.Tr>
        <B.Td>{{B.data.artist}}</B.Td>
        <B.Td>{{B.data.album}}</B.Td>
        <B.Td>{{B.data.year}}</B.Td>
        <B.Td>
          <Hds::Dropdown as |dd|>
            <dd.ToggleIcon @icon="more-horizontal" @text="Overflow Options" @hasChevron={{false}} @size="small" />
            <dd.Interactive @route="components.table" @text="Create" />
            <dd.Interactive @route="components.table" @text="Read" />
            <dd.Interactive @route="components.table" @text="Update" />
            <dd.Separator />
            <dd.Interactive @route="components.table" @text="Delete" @color="critical" @icon="trash" />
          </Hds::Dropdown>
        </B.Td>
      </B.Tr>
    </:body>
  </Hds::Table>

  <Shw::Text::Body>Table where last column has right-aligned text</Shw::Text::Body>

  <Hds::Table
    @model={{this.model.music}}
    @columns={{array
      (hash key="artist" label="Artist" isSortable="true")
      (hash key="album" label="Album" isSortable="true")
      (hash key="year" label="Release Year" isSortable="true")
      (hash key="vinyl-cost" label="Vinyl Cost (USD)" align="right")
    }}
  >
    <:body as |B|>
      <B.Tr>
        <B.Td>{{B.data.artist}}</B.Td>
        <B.Td>{{B.data.album}}</B.Td>
        <B.Td>{{B.data.year}}</B.Td>
        <B.Td @align="right">{{B.data.vinyl-cost}}</B.Td>
      </B.Tr>
    </:body>
  </Hds::Table>

  <Shw::Text::Body>Table with various cell content</Shw::Text::Body>

  <Hds::Table
    @model={{this.model.music}}
    @columns={{array
      (hash key="artist" label="Artist" isSortable="true")
      (hash key="album" label="Album" isSortable="true")
      (hash key="year" label="Release Year" isSortable="true")
      (hash key="other" label="Additional Actions")
    }}
  >
    <:body as |B|>
      <B.Tr>
        <B.Td><Hds::Link::Inline @href="#showcase">{{B.data.artist}}</Hds::Link::Inline></B.Td>
        <B.Td>
          <div class="shw-component-table-cell-content-div">
            <FlightIcon @name={{B.data.icon}} />
            {{B.data.album}}
          </div>
        </B.Td>
        <B.Td>
          <Hds::Badge @text={{B.data.year}} @type={{B.data.badge-type}} @color={{B.data.badge-color.name}} />
        </B.Td>
        <B.Td>
          <Hds::ButtonSet>
            <Hds::Button @text="Add" @isIconOnly={{true}} @icon="plus" @size="small" />
            <Hds::Button @text="Edit" @isIconOnly={{true}} @icon="edit" @size="small" @color="secondary" />
            <Hds::Button @text="Delete" @isIconOnly={{true}} @icon="trash" @size="small" @color="critical" />
          </Hds::ButtonSet>
        </B.Td>
      </B.Tr>
    </:body>
  </Hds::Table>

  <Shw::Text::Body>Table with multi-line content</Shw::Text::Body>

  <Hds::Table
    @model={{this.model.music}}
    @caption="table with multi-line content"
    @columns={{array
      (hash key="artist" label="Artist")
      (hash key="album" label="Album")
      (hash key="quote" label="Quote" width="50%")
    }}
  >
    <:body as |B|>
      <B.Tr>
        <B.Td>{{B.data.artist}}</B.Td>
        <B.Td>{{B.data.album}}</B.Td>
        <B.Td>&ldquo;{{B.data.quote}}&rdquo;</B.Td>
      </B.Tr>
    </:body>
  </Hds::Table>

  <Shw::Text::H2>Table elements</Shw::Text::H2>

  <Shw::Text::H3>Head</Shw::Text::H3>

  <Shw::Flex @label="ThSort states" as |SF|>
    <SF.Item @grow={{true}}>
      <Hds::Table>
        <:head>
          <Hds::Table::Tr>
            {{#each @model.STATES as |state|}}
              <Hds::Table::ThSort mock-state-value={{state}} mock-state-selector="button">
                {{capitalize state}}
              </Hds::Table::ThSort>
            {{/each}}
          </Hds::Table::Tr>
        </:head>
      </Hds::Table>
    </SF.Item>
  </Shw::Flex>

  <Shw::Flex @label="Th with custom width" as |SF|>
    <SF.Item @grow={{true}}>
      <Hds::Table @caption="a custom table with no model defined">
        <:head as |H|>
          <H.Tr>
            <H.Th>Auto</H.Th>
            <H.Th>Auto</H.Th>
            <H.Th>Auto</H.Th>
            <H.Th @width="50px">Custom</H.Th>
          </H.Tr>
        </:head>
        <:body as |B|>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>50px</B.Td>
          </B.Tr>
        </:body>
      </Hds::Table>
    </SF.Item>
  </Shw::Flex>

  <Shw::Text::H3>Body</Shw::Text::H3>

  <Shw::Flex @label="Static table with row striping" as |SF|>
    <SF.Item @grow={{true}}>
      <Hds::Table @isStriped={{true}} @caption="Static table with row striping">
        <:head as |H|>
          <H.Tr>
            <H.Th>Lorem</H.Th>
            <H.Th>Ipsum</H.Th>
            <H.Th>Dolor</H.Th>
            <H.Th>Sit amet</H.Th>
          </H.Tr>
        </:head>
        <:body as |B|>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
          <B.Tr>
            <B.Th>Scope Row</B.Th>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
            <B.Td>Cell Content</B.Td>
          </B.Tr>
        </:body>
      </Hds::Table>
    </SF.Item>
  </Shw::Flex>


</section>