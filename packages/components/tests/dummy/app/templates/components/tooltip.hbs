{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: MPL-2.0
}}

{{page-title "Tooltip Component"}}

<Shw::Text::H1>Tooltip</Shw::Text::H1>

<section data-test-percy>
  <Shw::Text::H2>TooltipButton</Shw::Text::H2>

  <Shw::Text::H3>Content</Shw::Text::H3>

  <Shw::Text::H4>On its own</Shw::Text::H4>
  <Shw::Flex as |SF|>
    <SF.Item @label="With a FlightIcon as content">
      <Hds::TooltipButton @text="Here is more information">
        <FlightIcon @name="alert-circle" />
      </Hds::TooltipButton>
    </SF.Item>

    <SF.Item @label="With an HTML time element as content">
      <Hds::TooltipButton @text="2023-03-30T19:18:01.684Z">
        <time datetime="2023-03-30T19:18:01.684Z">Apr 5, 2023</time>
      </Hds::TooltipButton>
    </SF.Item>

    <SF.Item @label="With really long content in tooltip">
      <Hds::TooltipButton
        @text="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
      >
        <FlightIcon @name="alert-circle" />
      </Hds::TooltipButton>
    </SF.Item>
  </Shw::Flex>

  <Shw::Text::H4>Used next to text</Shw::Text::H4>
  <p>
    <strong>Lorem ipsum dolor sit amet consectetur</strong>
    <Hds::TooltipButton @text="Hello!"><FlightIcon @name="alert-circle" /></Hds::TooltipButton>
  </p>

  <p>
    Lorem ipsum dolor sit amet consectetur
    <Hds::TooltipButton @text="Hello!"><FlightIcon @name="alert-circle" /></Hds::TooltipButton>
    adipisicing elit. Doloremque blanditiis sapiente iste beatae voluptates voluptatum.
  </p>

  <Shw::Text::H4>Used within various components</Shw::Text::H4>

  <Shw::Text::Body>
    <strong>Used within a <code>TabPanel</code></strong><br />
    <em>(Using within a <code>Tab</code> would result with a button nested inside a button and won't function.)</em>
  </Shw::Text::Body>

  <Hds::Tabs as |T|>
    <T.Tab>One</T.Tab>
    <T.Tab>Two</T.Tab>
    <T.Tab>Three</T.Tab>

    <T.Panel>
      <p>
        Content 1
        <Hds::TooltipButton @text="Hello!"><FlightIcon @name="alert-circle" /></Hds::TooltipButton>
      </p>
    </T.Panel>
    <T.Panel>Content 2</T.Panel>
    <T.Panel>Content 3</T.Panel>
  </Hds::Tabs>

  <Shw::Text::Body><strong>Used within an alert</strong></Shw::Text::Body>

  <Hds::Alert @type="inline" @color="warning" @onDismiss={{this.noop}} as |A|>
    <A.Title>Warning</A.Title>
    <A.Description>
      Caution is advised.
      <Hds::TooltipButton @text="Hello!"><FlightIcon @name="alert-circle" /></Hds::TooltipButton>
    </A.Description>
  </Hds::Alert>

  <!-- Tooltips work within first card but all subsequant uses become broken
  <Shw::Text::Body><strong>Used within a RadioCard</strong>
    (Only working within first card for some reason)</Shw::Text::Body>

  <Hds::Form::RadioCard::Group @name="radio-card-basic-example" @alignment="center" as |G|>
    <G.Legend>Create a connection</G.Legend>
    <G.RadioCard @checked={{true}} {{on "change" this.onChange}} as |R|>
      <Hds::TooltipButton @text="Amazon Web Services"><R.Icon @name="aws-color" /></Hds::TooltipButton>
      <R.Label>
        Quick peering with Quick Links
        <Hds::TooltipButton @text="Hello!"><FlightIcon @name="alert-circle" /></Hds::TooltipButton>
      </R.Label>
      <R.Description>
        Works within description text.
        <Hds::TooltipButton @text="Hello!"><FlightIcon @name="alert-circle" /></Hds::TooltipButton>
      </R.Description>
    </G.RadioCard>

    <G.RadioCard {{on "change" this.onChange}} as |R|>
      <Hds::TooltipButton @text="Amazon Web Services"><R.Icon @name="aws-color" /></Hds::TooltipButton>
      <R.Label>
        Quick peering with Quick Links
        <Hds::TooltipButton @text="Hello!"><FlightIcon @name="alert-circle" /></Hds::TooltipButton>
      </R.Label>
      <R.Description>
        Works within description text.
        <Hds::TooltipButton @text="Hello!"><FlightIcon @name="alert-circle" /></Hds::TooltipButton>
      </R.Description>
    </G.RadioCard>

    <G.RadioCard {{on "change" this.onChange}} as |R|>
      <Hds::TooltipButton @text="Amazon Web Services"><R.Icon @name="aws-color" /></Hds::TooltipButton>
      <R.Label>
        Manual peering using AWS CLI
        <Hds::TooltipButton @text="Hello!"><FlightIcon @name="alert-circle" /></Hds::TooltipButton>
      </R.Label>
      <R.Description>
        Provide you AWS CLI template to apply connection settings.
        <Hds::TooltipButton @text="Hello!"><FlightIcon @name="alert-circle" /></Hds::TooltipButton>
      </R.Description>
    </G.RadioCard>
  </Hds::Form::RadioCard::Group>
  -->

  <Shw::Divider @level={{2}} />

  <Shw::Text::H3>States</Shw::Text::H3>

  <Shw::Text::Body>
    The button which serves as the opener for the tooltip has no special styles of its own other than for the focus
    state.
  </Shw::Text::Body>

  <Shw::Text::Body>
    <strong>Note:</strong>
    There is a bug with the position of the tooltips below which are set to show on page load for example purposes. If
    you scroll the page a bit they will snap back to showing as centered. (Tooltips displayed on hover or focus do not
    have this bug.)
  </Shw::Text::Body>

  <Shw::Text::H4>With icon as opener content</Shw::Text::H4>

  <Shw::Flex {{style gap="5rem"}} as |SF|>
    {{#each @model.STATES as |state|}}
      <SF.Item @label={{state}}>
        {{#if (or (eq state "hover") (eq state "focus"))}}
          <Hds::TooltipButton
            @text="Hello!"
            mock-state-value={{state}}
            @extraTippyOptions={{hash showOnCreate=true}}
          ><FlightIcon @name="alert-circle" /></Hds::TooltipButton>
        {{else}}
          <Hds::TooltipButton @text="Hello!" mock-state-value={{state}}><FlightIcon
              @name="alert-circle"
            /></Hds::TooltipButton>
        {{/if}}
      </SF.Item>
    {{/each}}
  </Shw::Flex>

  <Shw::Text::H4>With text as opener content</Shw::Text::H4>

  <Shw::Flex {{style gap="5rem"}} as |SF|>
    {{#each @model.STATES as |state|}}
      <SF.Item @label={{state}}>
        {{#if (or (eq state "hover") (eq state "focus"))}}
          <Hds::TooltipButton
            @text="Hello!"
            mock-state-value={{state}}
            @extraTippyOptions={{hash showOnCreate=true}}
          >More info</Hds::TooltipButton>
        {{else}}
          <Hds::TooltipButton @text="Hello!" mock-state-value={{state}}>More info</Hds::TooltipButton>
        {{/if}}
      </SF.Item>
    {{/each}}
  </Shw::Flex>

  <Shw::Divider @level={{2}} />

  <Shw::Text::H3>Options</Shw::Text::H3>

  <Shw::Text::H4>Placement</Shw::Text::H4>
  <Shw::Flex {{style gap="5rem"}} as |SF|>
    {{#each @model.PLACEMENTS as |place|}}
      <SF.Item @label={{place}}>
        <Hds::TooltipButton
          @text="Hello!"
          @placement={{place}}
          @extraTippyOptions={{hash showOnCreate=true}}
        ><FlightIcon @name="alert-circle" /></Hds::TooltipButton>
      </SF.Item>
    {{/each}}
  </Shw::Flex>

  <Shw::Text::H4>Offset</Shw::Text::H4>
  <Shw::Flex {{style gap="5rem"}} as |SF|>
    <SF.Item @label="Default offset">
      <Hds::TooltipButton @text="Hello!" @extraTippyOptions={{hash showOnCreate=true}}><FlightIcon
          @name="alert-circle"
        /></Hds::TooltipButton>
    </SF.Item>

    <SF.Item @label="Offset: 0 40">
      <Hds::TooltipButton
        @text="Hello!"
        @offset={{array 0 40}}
        @extraTippyOptions={{hash showOnCreate=true}}
      ><FlightIcon @name="alert-circle" /></Hds::TooltipButton>
    </SF.Item>

    <SF.Item @label="Offset: 20 0">
      <Hds::TooltipButton
        @text="Hello!"
        @offset={{array 20 0}}
        @extraTippyOptions={{hash showOnCreate=true}}
      ><FlightIcon @name="alert-circle" /></Hds::TooltipButton>
    </SF.Item>
  </Shw::Flex>
</section>

<Shw::Divider />

<section data-test-percy>
  <Shw::Text::H2><code>hds-tooltip</code> modifier</Shw::Text::H2>

  <Shw::Text::H3>Content</Shw::Text::H3>

  <Shw::Text::H4>On its own</Shw::Text::H4>

  <Shw::Flex as |SF|>
    <SF.Item @label="On a button">
      <button type="button" {{hds-tooltip "Hello!"}}><FlightIcon @name="alert-circle" /></button>
    </SF.Item>

    <SF.Item @label="On a link">
      <a href="#" {{hds-tooltip "Hello!"}}><FlightIcon @name="alert-circle" /></a>
    </SF.Item>

    <SF.Item @label="On an input">
      <Hds::Form::Field @layout="vertical" as |F|>
        <F.Label @controlId="tooltip-example-control-id">First Name</F.Label>
        <F.Control>
          <input type="text" value="Jane" id="tooltip-example-control-id" {{hds-tooltip "Hello!"}} />
        </F.Control>
      </Hds::Form::Field>
    </SF.Item>

    <SF.Item @label="On a span (not accessible)">
      <span {{hds-tooltip "Invalid usage"}}><FlightIcon @name="alert-circle" /></span>
    </SF.Item>

    <SF.Item @label="On a 'time' tag (not accessible)">
      <time {{hds-tooltip "Invalid usage"}} datetime="2023-03-30T19:18:01.684Z">Mar 30, 2023</time>
    </SF.Item>
  </Shw::Flex>
</section>