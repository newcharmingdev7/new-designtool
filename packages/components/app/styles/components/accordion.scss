/**
 * Copyright (c) HashiCorp, Inc.
 * SPDX-License-Identifier: MPL-2.0
 */

//
// ACCORDION
//

// NOTE: Styles are still rough, designs not yet finalized

@use "../mixins/focus-ring" as *;

:root {
  --token-accordion-item-padding: 16px;
}

.hds-accordion {
  display: block;
  border-radius: 4px;
}

.hds-accordion-item {
  width: auto !important; // temporary!
  border-radius: 6px;
  box-shadow: var(--token-surface-mid-box-shadow);

  &.hds-accordion-item--is-clickable {
    &:hover,
    &.mock-hover {
      box-shadow: var(--token-surface-high-box-shadow);
    }
  }

  + .hds-accordion-item { margin-top: 12px; }
}

.hds-accordion-item--is-open {
  .hds-accordion-item__toggle-button {
    .flight-icon-chevron-down {
      transform: rotate(-180deg);
    }
  }
}

.hds-accordion-item__toggle {
  position: relative;
  display: flex;
  gap: 12px;
  justify-content: space-between;
  padding: var(--token-accordion-item-padding) var(--token-accordion-item-padding) var(--token-accordion-item-padding) 12px;

  // .mock-focus & {
  //   @include hds-focus-ring-with-pseudo-element();

  //   &::before {
  //     box-shadow: var(--token-focus-ring-action-box-shadow);
  //   }
  // }
}

.hds-accordion-item--is-clickable {
  &.mock-focus {
    .hds-accordion-item__toggle {
      @include hds-focus-ring-with-pseudo-element();

      &::before {
        box-shadow: var(--token-focus-ring-action-box-shadow);
      }
    }
  }
}

.hds-accordion-item__toggle-button {
  @include hds-focus-ring-with-pseudo-element();
  position: static;
  flex-shrink: none;
  padding: 0;
  // TODO: refactor button styles (perhaps use HdsButton)
  background: transparent;
  border: 0;
  // border: 1px solid transparent;
  border-radius: 5px;

  .hds-accordion-item--is--not-clickable & {
    position: relative;
    // border-color: var(--token-color-border-strong);
    box-shadow: var(--token-surface-mid-box-shadow);
  }

  // &::after {
  //   position: absolute;
  //   display: block;
  //   content: "";
  //   inset: 0;
  // }

  .flight-icon-chevron-down {
    @media (prefers-reduced-motion: no-preference) {
      transition: transform 0.3s;
    }
  }
}

// Temporary
.hds-accordion-item--is--not-clickable {
  // Hovering chevron button
  &[mock-state-value="hover"] .hds-accordion-item__toggle-button,
  .hds-accordion-item__toggle-button:hover {
    // background: red !important;
    box-shadow: var(--token-surface-high-box-shadow) !important;
  }

  // Focusing chevron button
  &[mock-state-value="focus"] .hds-accordion-item__toggle-button,
  .hds-accordion-item__toggle-button:focus {
    @include hds-focus-ring-with-pseudo-element();

    &::before {
      box-shadow: var(--token-focus-ring-action-box-shadow);
    }
  }
}

.hds-accordion-item--is-clickable {
  .hds-accordion-item__toggle-button {
    &::after {
      position: absolute;
      display: block;
      content: "";
      inset: 0;
    }
  }
}

.hds-accordion-item__toggle-content {
  flex: 1;
}

.hds-accordion-item__content {
  padding: 4px var(--token-accordion-item-padding) var(--token-accordion-item-padding) var(--token-accordion-item-padding);
}

// .hds-accordion-item--is-clickable {
//   background: lime;
// }
