/**
 * Copyright (c) HashiCorp, Inc.
 * SPDX-License-Identifier: MPL-2.0
 */

//
// ACCORDION
//

@use "../mixins/button" as *;
@use "../mixins/focus-ring" as *;

:root {
  --token-accordion-item-padding: 16px;
  --token-accordion-item-padding-right: 12px;
}

// ACCORDION COMPONENT (wrapper)

.hds-accordion {
  display: flex;
  flex-direction: column;
  gap: 12px;

  // override default .hds-disclosure-primitive style (Q: Should primitive be refactored?)
  .hds-accordion-item { width: 100%; }
}

// ACCORDION ITEM COMPONENT (nested child)

.hds-accordion-item {
  background: var(--token-color-surface-primary);
  border-radius: 6px;
  box-shadow: var(--token-surface-mid-box-shadow);

  &:hover,
  &.mock-hover {
    box-shadow: var(--token-surface-high-box-shadow);
  }
}

// TOGGLE BLOCK

.hds-accordion-item__toggle {
  position: relative;
  display: flex;
  gap: 12px;
  align-items: center;
  padding:
    var(--token-accordion-item-padding)
    var(--token-accordion-item-padding)
    var(--token-accordion-item-padding)
    var(--token-accordion-item-padding-right);
}

.hds-accordion-item__button {
  @include hds-focus-ring-with-pseudo-element();
  margin: -1px; // offset border size
  padding: 0;

  &:hover { cursor: pointer; }

  // entire toggle area is interactive
  &.hds-accordion-item__button--is-not-interactive {
    position: static;
    background: transparent;
    border: 1px solid transparent;

    // expand button target to cover entire AccordionItem Toggle block (depending on the `@isInteractive` argument)
    &::after {
      position: absolute;
      display: block;
      border-radius: 6px;
      content: "";
      inset: 0;
    }
  }

  // only chevron button area is interactive
  &.hds-accordion-item__button--is-interactive {
    @include hds-button();
    @include hds-button-color-secondary();

    // when button is focused by clicking (vs. tabbing), border turns blue w/o this:
    &:focus { border-color: var(--token-color-border-strong); }
  }

  // animate chevron icon
  &.hds-accordion-item__button--is-open {
    .flight-icon-chevron-down {
      transform: rotate(-180deg);
    }
  }

  .flight-icon-chevron-down {
    @media (prefers-reduced-motion: no-preference) {
      transition: transform 0.3s;
    }
  }
}

// Consumer added content that apperas next to the chevron button:
.hds-accordion-item__toggle-content {
  flex: 1;
}

// CONTENT BLOCK

.hds-accordion-item__content {
  padding: 4px var(--token-accordion-item-padding) var(--token-accordion-item-padding) var(--token-accordion-item-padding);
}
