/**
 * Copyright (c) HashiCorp, Inc.
 * SPDX-License-Identifier: MPL-2.0
 */

//
// TOOLTIP & TOOLTIP-BUTTON
//

@use "../mixins/focus-ring" as *;

:root {
  // Dimensions:
  --token-tooltip-max-width: 280px;

  // Focus highlight position
  --token-tooltip-tab-focus-inset-vertical: -10px;
  --token-tooltip-tab-focus-inset-horizontal: -16px;

  // Colors:
  --token-tooltip-surface-primary: var(--token-color-palette-neutral-700);
}

// TESTING ONLY:
// ------------------------------
.DISABLEcomponents-tooltip {
  // Tooltip trigger wrapper:
  .hds-tooltip-button {
    outline: 1px solid red;

    > * {
      background: yellow;
    }
  }

  // openers
  [tabindex="0"] {
    background: lime;
    outline: 1px dashed magenta;
  }
}

.hds-tooltip-button {
  @include hds-focus-ring-with-pseudo-element(
    $top: var(--token-tooltip-tab-focus-inset-vertical),
    $right: var(--token-tooltip-tab-focus-inset-horizontal),
    $bottom: var(--token-tooltip-tab-focus-inset-vertical),
    $left: var(--token-tooltip-tab-focus-inset-horizontal),
  );
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-height: 1em; // used together with line-height: 0, maintains min-height of text-only content
  margin: 0;
  padding: 0;
  color: inherit;
  line-height: 0; // this makes the button the same height as nested icons
  background: transparent;
  border: none;

  > svg { display: block; } // removes excess whitespace
}

// From Cloud-ui:
// ---------------------------------------------------------
.tippy-box[data-theme~="hds"] {
  padding: 8px 12px;
  color: var(--token-color-foreground-high-contrast);
  font-weight: var(--token-typography-font-weight-regular);
  font-size: var(--token-typography-body-200-font-size);
  font-family: var(--token-typography-body-200-font-family);
  line-height: var(--token-typography-body-200-line-height);
  background-color: var(--token-tooltip-surface-primary);
  border-radius: 5px;
  box-shadow: var(--token-elevation-higher-box-shadow);
  transition-property: transform, visibility, opacity;

  &[data-animation="fade"][data-state="hidden"] {
    opacity: 0;
  }

  &[data-inertia][data-state="visible"] {
    transition-timing-function: cubic-bezier(0.54, 1.5, 0.38, 1.11);
  }

  .tippy-content {
    position: relative;
    z-index: 1;
    // This needs to go here because Tippy generates a javascript
    // max-width on .tippy-box.
    max-width: var(--token-tooltip-max-width);
  }

  // works with Tippy's custom SVG arrow variation:
  .tippy-svg-arrow {
    fill: var(--token-tooltip-surface-primary);
  }
}
