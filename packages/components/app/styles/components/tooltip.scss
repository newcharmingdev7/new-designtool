/**
 * Copyright (c) HashiCorp, Inc.
 * SPDX-License-Identifier: MPL-2.0
 */

//
// TOOLTIP
//

:root {
  // Dimensions:

  // $tooltip-width: 192px;
  --token-tooltip-max-width: 192px;

  // $arrow-border-size: 7.5px;
  --token-tooltip-arrow-border-size: 7.5px;

  // $arrow-width: calc(#{$arrow-border-size} * 2); // 15 pixels
  --token-tooltip-arrow-width: calc(var(--token-tooltip-arrow-border-size) * 2); // 15 pixels

  // $arrow-height: calc(#{$arrow-border-size} * 1.07); // 8 pixels
  --token-tooltip-arrow-height: calc(var(--token-tooltip-arrow-border-size) * 1.07); // 8 pixels

  // $arrow-y-axis-distance: calc(0px - #{$arrow-border-size});
  --token-tooltip-arrowy-axis-distance: calc(0px - var(--token-tooltip-arrow-border-size));

  // Colors:

  // $tooltip-background-color: var(--token-color-palette-neutral-700);
  --token-tooltip-surface-primary: var(--token-color-palette-neutral-700);
}

// TESTING ONLY:
// ------------------------------
.DISABLEcomponents-tooltip {
  // Tooltip trigger wrapper:
  .hds-tooltip {
    outline: 2px solid red;

    > * {
      background: yellow;
    }
  }

  // openers
  [tabindex="0"] {
    margin: 0;
    padding: 0;
    background: lime;
    outline: 1px dashed magenta;
  }
}

.hds-tooltip {
  display: inline-block;
  min-height: 1em; // used together with line-height: 0, maintains min-height of text-only content
  margin: 0;
  padding: 0;
  color: inherit;
  line-height: 0; // this makes the button the same height as nested icons, may not be desireable though
  background: transparent;
  border: none;

  > svg { display: block; } // removes excess whitespace
}

// From Cloud-ui:
// ---------------------------------------------------------
.tippy-box[data-theme~="hcp"] {
  // $tooltip-background-color: var(--token-color-palette-neutral-700);
  $tooltip-width: 192px;
  $arrow-border-size: 7.5px;
  $arrow-width: calc(#{$arrow-border-size} * 2); // 15 pixels
  $arrow-height: calc(#{$arrow-border-size} * 1.07); // 8 pixels
  $arrow-y-axis-distance: calc(0px - #{$arrow-border-size});

  padding: 0.75rem;
  color: var(--token-color-palette-neutral-0);
  font-size: var(--token-typography-body-100-font-size);
  background-color: var(--token-tooltip-surface-primary);
  border-radius: 3px;
  box-shadow: var(--token-surface-low-box-shadow);
  transition-property: transform, visibility, opacity;

  &[data-animation="fade"][data-state="hidden"] {
    opacity: 0;
  }

  &[data-inertia][data-state="visible"] {
    transition-timing-function: cubic-bezier(0.54, 1.5, 0.38, 1.11);
  }

  .tippy-content {
    position: relative;
    z-index: 1;
    // This needs to go here because Tippy generates a javascript
    // max-width on .tippy-box.
    max-width: $tooltip-width;
  }

  .tippy-arrow {
    width: $arrow-width;
    height: $arrow-height;
    color: var(--token-tooltip-surface-primary);

    &::before {
      position: absolute;
      border-color: transparent;
      border-style: solid;
      content: "";
    }
  }

  /***
  Because we are customizing the arrow size in our theme,
  we need to customize the positioning of the .tippy-arrow for each placement option
  **/

  // placement option: top
  &[data-placement^="top"] > .tippy-arrow {
    bottom: 0;

    &::before {
      bottom: $arrow-y-axis-distance;
      border-width: $arrow-border-size $arrow-border-size 0;
      border-top-color: initial;
      transform-origin: center top;
    }
  }

  // placement option: bottom
  &[data-placement^="bottom"] > .tippy-arrow {
    top: 0;

    &::before {
      top: $arrow-y-axis-distance;
      left: 0;
      border-width: 0 $arrow-border-size $arrow-border-size;
      border-bottom-color: initial;
      transform-origin: center bottom;
    }
  }

  // placement options: left, left-end, left-start
  &[data-placement^="left"] > .tippy-arrow,
  &[data-placement^="left-start"] > .tippy-arrow,
  &[data-placement^="left-end"] > .tippy-arrow {
    right: 0;

    &::before {
      right: $arrow-y-axis-distance;
      border-width: $arrow-border-size 0 $arrow-border-size $arrow-border-size;
      border-left-color: initial;
      transform-origin: center left;
    }
  }

  &[data-placement^="left-end"] > .tippy-arrow {
    &::before {
      top: $arrow-y-axis-distance;
    }
  }

  // placement options: right, right-start, right-end
  &[data-placement^="right"] > .tippy-arrow,
  &[data-placement^="right-start"] > .tippy-arrow,
  &[data-placement^="right-end"] > .tippy-arrow {
    left: 0;

    &::before {
      left: $arrow-y-axis-distance;
      border-width: $arrow-border-size $arrow-border-size $arrow-border-size 0;
      border-right-color: initial;
      transform-origin: center right;
    }
  }

  &[data-placement^="right-end"] > .tippy-arrow {
    &::before {
      top: $arrow-y-axis-distance;
    }
  }
}
